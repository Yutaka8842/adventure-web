<div class="body">
  <%= render partial: 'left_navigation'%>
  <div class="content">
    <div class="contents-bg"></div>
    <div class="chatmain">
      <div class="main-head">
        <div class="main-index">ChatRoom</div>
        <div class="main-head-btn" ><%= link_to "Edit Room", edit_room_path %></div>
      </div>
      <div class="message-area" id="scroll-message">
        <% @messages.each do |message| %>
          <div class="message" >
            <div class="left-message">
              <% if message.user.icon.attached? %>
                <%= image_tag message.user.icon.variant(gravity: :center, resize:"640x640^", crop:"640x640+0+0"), class:"message-user-icon" %>
              <% else %>
                <%= image_tag "user-icon.png", class:"message-user-icon" %>
              <% end %><br />
              <div class="message-user">
                <div class="message-name">
                  <%= link_to  message.user.name, user_path(message.user_id) %>
                </div><br />
                <div class="message-content">
                  <%= message.content %> 
                </div>
              </div>
            </div>
            <%= image_tag message.image.variant(resize: '200x200'), class: 'message-image' if message.image.attached? %>
            <div class="right-message">
              <div class="message-date">
                <%= l message.created_at %>
              </div> 
            </div>
          </div>
        <% end %>
      </div>
    </div>
    <%= form_with model: [@room, @message], class:"message-form", local: true do |f| %>
      <%= f.text_field :content, class:"message-field", placeholder:"Message", autofocus: true %>
      <label class="input-image">
      <%= f.file_field :image, class: "upload-file" %>
      </label>
      <%= f.submit "", class:"send"%>
    <% end %>
  </div>
</div>